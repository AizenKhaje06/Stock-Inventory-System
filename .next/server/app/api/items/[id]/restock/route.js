(()=>{var e={};e.id=998,e.ids=[998],e.modules={1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},12412:e=>{"use strict";e.exports=require("assert")},17546:()=>{},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29024:(e,t,r)=>{"use strict";r.d(t,{Fv:()=>d,I0:()=>y,Nl:()=>p,SX:()=>w,T$:()=>l,ao:()=>q,jM:()=>c,tk:()=>h,yY:()=>m});var s=r(67689),a=r(60008),i=r(59493);let o=["https://www.googleapis.com/auth/spreadsheets"],n=e=>(0,a.GP)(e,"yyyy-MM-dd / hh:mm a");async function u(){let e=new s.q7g.auth.GoogleAuth({credentials:{client_email:process.env.GOOGLE_CLIENT_EMAIL,private_key:process.env.GOOGLE_PRIVATE_KEY?.replace(/\\n/g,"\n")},scopes:o});return s.q7g.sheets({version:"v4",auth:e})}async function p(){let e=await u(),t=process.env.GOOGLE_SHEET_ID;return((await e.spreadsheets.values.get({spreadsheetId:t,range:"Inventory!A2:J"})).data.values||[]).map(e=>({id:e[0]||"",name:e[1]||"",sku:e[2]||"",category:e[3]||"",quantity:Number.parseInt(e[4]||"0"),costPrice:Number.parseFloat(e[5]||"0"),sellingPrice:Number.parseFloat(e[6]||"0"),reorderLevel:Number.parseInt(e[7]||"0"),supplier:e[8]||"",lastUpdated:e[9]||n(new Date)}))}async function c(e){let t=await u(),r=process.env.GOOGLE_SHEET_ID,s=`ITEM-${Date.now()}`,a=n(new Date),i=[[s,e.name,e.sku,e.category,e.quantity,e.costPrice,e.sellingPrice,e.reorderLevel,e.supplier,a]];return await t.spreadsheets.values.append({spreadsheetId:r,range:"Inventory!A:J",valueInputOption:"RAW",requestBody:{values:i}}),{...e,id:s,lastUpdated:a}}async function d(e,t){let r=await u(),s=process.env.GOOGLE_SHEET_ID,a=(await p()).findIndex(t=>t.id===e);if(-1===a)throw Error("Item not found");let i=a+2;t.lastUpdated||(t.lastUpdated=n(new Date));let o={id:0,name:1,sku:2,category:3,quantity:4,costPrice:5,sellingPrice:6,reorderLevel:7,supplier:8,lastUpdated:9},c=[];for(let[e,r]of Object.entries(t)){let t=o[e];if(void 0!==t&&void 0!==r){let e;if("number"==typeof r)e={numberValue:r};else{if("string"!=typeof r)continue;e={stringValue:r}}c.push({updateCells:{range:{sheetId:0,startRowIndex:i-1,endRowIndex:i,startColumnIndex:t,endColumnIndex:t+1},fields:"userEnteredValue",rows:[{values:[{userEnteredValue:e}]}]}})}}c.length>0&&await r.spreadsheets.batchUpdate({spreadsheetId:s,requestBody:{requests:c}})}async function l(e){let t=await u(),r=process.env.GOOGLE_SHEET_ID,s=(await p()).findIndex(t=>t.id===e);if(-1===s)throw Error("Item not found");let a=s+2;await t.spreadsheets.batchUpdate({spreadsheetId:r,requestBody:{requests:[{deleteDimension:{range:{sheetId:0,dimension:"ROWS",startIndex:a-1,endIndex:a}}}]}})}async function m(e){let t=await u(),r=process.env.GOOGLE_SHEET_ID,s=`TXN-${Date.now()}`,a=n(new Date),i=[[s,e.itemId,e.itemName,e.quantity,e.costPrice,e.sellingPrice,e.totalCost,e.totalRevenue,e.profit,a,e.type,e.paymentMethod,e.referenceNumber||""]];return await t.spreadsheets.values.append({spreadsheetId:r,range:"Transactions!A:M",valueInputOption:"RAW",requestBody:{values:i}}),{...e,id:s,timestamp:a}}async function y(){let e=await u(),t=process.env.GOOGLE_SHEET_ID;return((await e.spreadsheets.values.get({spreadsheetId:t,range:"Transactions!A2:M"})).data.values||[]).map(e=>({id:e[0]||"",itemId:e[1]||"",itemName:e[2]||"",quantity:Number.parseInt(e[3]||"0"),costPrice:Number.parseFloat(e[4]||"0"),sellingPrice:Number.parseFloat(e[5]||"0"),totalCost:Number.parseFloat(e[6]||"0"),totalRevenue:Number.parseFloat(e[7]||"0"),profit:Number.parseFloat(e[8]||"0"),timestamp:e[9]||"",type:e[10]||"sale",paymentMethod:e[11]||"cash",referenceNumber:e[12]||""}))}async function v(){let e=await u(),t=process.env.GOOGLE_SHEET_ID;try{await e.spreadsheets.values.get({spreadsheetId:t,range:"Logs!A1:F1"})}catch(r){await e.spreadsheets.batchUpdate({spreadsheetId:t,requestBody:{requests:[{addSheet:{properties:{title:"Logs",gridProperties:{rowCount:1e3,columnCount:6}}}}]}}),await e.spreadsheets.values.update({spreadsheetId:t,range:"Logs!A1:F1",valueInputOption:"RAW",requestBody:{values:[["ID","Operation","Item ID","Item Name","Details","Timestamp"]]}})}}async function w(e){await v();let t=await u(),r=process.env.GOOGLE_SHEET_ID,s=`LOG-${Date.now()}`,a=n(new Date),i=[[s,e.operation,e.itemId||"",e.itemName||"",e.details,a]];return await t.spreadsheets.values.append({spreadsheetId:r,range:"Logs!A:F",valueInputOption:"RAW",requestBody:{values:i}}),{...e,id:s,timestamp:a}}async function q(){await v();let e=await u(),t=process.env.GOOGLE_SHEET_ID;return((await e.spreadsheets.values.get({spreadsheetId:t,range:"Logs!A2:F"})).data.values||[]).map(e=>({id:e[0]||"",operation:e[1]||"",itemId:e[2]||"",itemName:e[3]||"",details:e[4]||"",timestamp:e[5]||""})).sort((e,t)=>(0,i.qg)(t.timestamp,"yyyy-MM-dd / hh:mm a",new Date).getTime()-(0,i.qg)(e.timestamp,"yyyy-MM-dd / hh:mm a",new Date).getTime())}async function x(){let e=await u(),t=process.env.GOOGLE_SHEET_ID;try{await e.spreadsheets.values.get({spreadsheetId:t,range:"Restock!A1:G1"})}catch(r){await e.spreadsheets.batchUpdate({spreadsheetId:t,requestBody:{requests:[{addSheet:{properties:{title:"Restock",gridProperties:{rowCount:1e3,columnCount:7}}}}]}}),await e.spreadsheets.values.update({spreadsheetId:t,range:"Restock!A1:G1",valueInputOption:"RAW",requestBody:{values:[["ID","Item ID","Item Name","Quantity Added","Cost Price","Total Cost","Timestamp"]]}})}}async function h(e){await x();let t=await u(),r=process.env.GOOGLE_SHEET_ID,s=`RSTK-${Date.now()}`,a=n(new Date),i=[[s,e.itemId,e.itemName,e.quantity,e.costPrice,e.totalCost,a]];return await t.spreadsheets.values.append({spreadsheetId:r,range:"Restock!A:G",valueInputOption:"RAW",requestBody:{values:i}}),{...e,id:s,timestamp:a}}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},37830:e=>{"use strict";e.exports=require("node:stream/web")},38522:e=>{"use strict";e.exports=require("node:zlib")},44708:e=>{"use strict";e.exports=require("node:https")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},50755:e=>{"use strict";e.exports=require("node:url")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},73496:e=>{"use strict";e.exports=require("http2")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},76760:e=>{"use strict";e.exports=require("node:path")},77030:e=>{"use strict";e.exports=require("node:net")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},80594:()=>{},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},98390:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>y,routeModule:()=>c,serverHooks:()=>m,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{POST:()=>p});var a=r(45002),i=r(89587),o=r(1202),n=r(24715),u=r(29024);async function p(e,{params:t}){try{let{id:r}=await t,{amount:s}=await e.json();if(!s||s<=0)return n.NextResponse.json({error:"Amount must be a positive number"},{status:400});let a=(await (0,u.Nl)()).find(e=>e.id===r);if(!a)return n.NextResponse.json({error:"Item not found"},{status:404});let i=a.quantity+s;return await (0,u.Fv)(r,{quantity:i}),await (0,u.tk)({itemId:r,itemName:a.name,quantity:s,costPrice:a.costPrice,totalCost:a.costPrice*s}),await (0,u.SX)({operation:"restock",itemId:r,itemName:a.name,details:`Added ${s} units (total cost: $${(a.costPrice*s).toFixed(2)})`}),n.NextResponse.json({success:!0,item:{...a,quantity:i}})}catch(e){return console.error("[v0] Error restocking item:",e),n.NextResponse.json({error:"Failed to restock item"},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/items/[id]/restock/route",pathname:"/api/items/[id]/restock",filename:"route",bundlePath:"app/api/items/[id]/restock/route"},resolvedPagePath:"C:\\Inventory Management System\\Inventory-Management-System\\app\\api\\items\\[id]\\restock\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:l,serverHooks:m}=c;function y(){return(0,o.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:l})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[555,520,700],()=>r(98390));module.exports=s})();